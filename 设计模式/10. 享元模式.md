## 享元模式

-   也叫蝇量模式：运用共享技术有效地支持大量细粒度的对象
-    常用于系统底层开发，解决系统性能问题。像数据库连接池，里面都是创建好的连接对象，在这些连接对象中我们需要的则直接拿来用，避免重新创建，如果没有则创建一个

-   享元模式能够解决重复对象的内存浪费问题，当系统有大量相似对象时，需要缓冲池，不需要总是创建新对象，可以从缓冲池里拿，这样可以降低系统内存，同时提高效率
-   享元模式经典的应用场景就是池技术了，String常量池，数据库连接吃，缓冲池等等都是享元模式的应用

### 实现方式

-   抽象的享元角色，他是产品的抽象类，同时定义出对象的外部状态和内部状态的接口或实现
-   具体的享元角色，是具体的产品类，实现抽象角色定义相关业务
-   还有不可共享的角色， 一般不会出现在享元工厂中
-   享元工厂类，用于构建一个池容器（集合），同事提供从池中获取对象的方法

### 内部状态和外部状态

-   享元模式提出了两个要求：细粒度和共享对象。这里就涉及到内部状态和外部状态了，即对象将信息分为两个部分：内部状态和外部状态。
-   内部状态指对象共享出来的信息，存储在享元对象内部且不会随环境改变而改变
-   外部状态指对象得以依赖的一个标记，是随环境改变而改变的、不可共享的状态

### 源码分析

-   jdk-Integer 